    <div class="row ">
      <div class="col-sm-1 pr-0 pl-5 d-flex justify-content-center align-items-center">
        <i class="fas fa-clipboard-list fa-2x"> </i>
      </div>
      <div class="ol-sm-11">
        <h5 class="mt-3">Đơn Mua</h5>
      </div>
    </div>

    <nb-card>
      <nb-card-body>
        <nb-tabset fullWidth>
          <nb-tab badgeText={{soluongchoxacnhan}} badgeStatus="danger" tabTitle="Chờ xác nhận"
            tabIcon="credit-card-outline" responsive>
            <div class="container d-flex justify-content-center" *ngIf="dschoxacnhan.length <= 0">
              <img src="https://fansport.vn/default/template/img/cart-empty.png" id="cardempty">
            </div>
            <div class="container pt-1 order_tracking">
              <div class="row pl-4 pr-4 divphieudat" *ngFor="let eachPhieuDat of dschoxacnhan; let i = index">
                <div class="container eachphieudat mt-3">

                  <button id="phieudat" class="mt-3 mb-3" *ngFor="let eachSP of eachPhieuDat.San_Pham; let j = index">
                    <div class="row">
                      <div class="col-sm-2 pl-0">
                        <img src={{dssanphamchoxacnhan[i][j]?.Hinh_anh}} alt="Imgage error" class="avatar"
                          *ngIf="dssanphamchoxacnhan[i] !== undefined">
                      </div>
                      <div class="col-sm-10">
                        <div class="row mt-2 status" *ngIf="KiemTraTrangThai(eachPhieuDat)">
                          {{eachPhieuDat.Trang_thai}}
                        </div>
                        <div class="row mt-3">
                          <h6 class="m-0" *ngIf="dssanphamchoxacnhan[i] !== undefined">
                            {{dssanphamchoxacnhan[i][j]?.Ten_san_pham}}</h6>
                        </div>
                        <div class="row mt-2">
                          <small>x{{eachSP.So_luong}}</small>
                        </div>
                      </div>
                    </div>
                  </button>
                  <div class="container mb-3">
                    <div class="row">
                      <div class="col-sm-9 d-flex justify-content-end">
                        <button name="button" type="button" class="buttondanhgia mr-5" (click)="open_delete(content_delete, eachPhieuDat)">Hủy đơn</button>
                        <button name="button" type="button" class="buttondanhgia">Chi tiết</button>
                      </div>
                      <div class="col-sm-3">
                        <div class="row d-flex justify-content-end">
                          <small> Mã đơn hàng <strong>{{eachPhieuDat._id}}</strong> </small>
                        </div>
                        <div class="row d-flex justify-content-end">
                          <small>{{eachPhieuDat.Ngay_cap_nhat | date:"MM/dd/yyyy h:mma"}}</small>
                        </div>
                      </div>
                    </div>

                  </div>
                </div>
              </div>
            </div>
          </nb-tab>

          <nb-tab badgeText={{soluongcholayhang}} badgeStatus="danger" tabTitle="Chờ lấy hàng" tabIcon="gift-outline"
            responsive>
            <div class="container d-flex justify-content-center" *ngIf="dscholayhang.length <= 0">
              <img src="https://fansport.vn/default/template/img/cart-empty.png" id="cardempty">
            </div>
            <div class="container pt-1 order_tracking">
              <div class="row pl-4 pr-4 divphieudat" *ngFor="let eachPhieuDat of dscholayhang; let i = index">
                <div class="container eachphieudat">
                  <button id="phieudat" class="mt-3 mb-3" *ngFor="let eachSP of eachPhieuDat.San_Pham; let j = index">
                    <div class="row">
                      <div class="col-sm-2 pl-0">
                        <img src={{dssanphamcholayhang[i][j]?.Hinh_anh}} alt="Imgage error" class="avatar"
                          *ngIf="dssanphamcholayhang[i] !== undefined">
                      </div>
                      <div class="col-sm-10">
                        <div class="row mt-2 status" *ngIf="KiemTraTrangThai(eachPhieuDat)">
                          {{eachPhieuDat.Trang_thai}}
                        </div>
                        <div class="row mt-3">

                          <h6 class="m-0" *ngIf="dssanphamcholayhang[i] !== undefined">
                            {{dssanphamcholayhang[i][j]?.Ten_san_pham}}</h6>

                        </div>
                        <div class="row mt-2">
                          <small>x{{eachSP.So_luong}}</small>
                        </div>
                      </div>
                    </div>

                  </button>
                  <div class="container mb-3">
                    <div class="row">
                      <div class="col-sm-9 d-flex justify-content-end">
                        <button name="button" type="button" class="buttondanhgia">Chi tiết</button>
                      </div>
                      <div class="col-sm-3">
                        <div class="row d-flex justify-content-end">
                          <small> Mã đơn hàng <strong>{{eachPhieuDat._id}}</strong> </small>
                        </div>
                        <div class="row d-flex justify-content-end">
                          <small>{{eachPhieuDat.Ngay_cap_nhat | date:"MM/dd/yyyy h:mma"}}</small>
                        </div>
                      </div>
                    </div>

                  </div>
                </div>
              </div>
            </div>
          </nb-tab>

          <nb-tab badgeText={{soluongdanggiaohang}} badgeStatus="danger" tabTitle="Đang giao" tabIcon="car-outline"
            responsive>
            <div class="container d-flex justify-content-center" *ngIf="dsdanggiaohang.length <= 0">
              <img src="https://fansport.vn/default/template/img/cart-empty.png" id="cardempty">
            </div>
            <div class="container pt-1 order_tracking">
              <div class="row pl-4 pr-4 divphieudat" *ngFor="let eachPhieuDat of dsdanggiaohang; let i = index">
                <div class="container eachphieudat">
                  <button id="phieudat" class="mt-3 mb-3" *ngFor="let eachSP of eachPhieuDat.San_Pham; let j = index">
                    <div class="row">
                      <div class="col-sm-2 pl-0">
                        <img src={{dssanphamdanggiaohang[i][j]?.Hinh_anh}} alt="Imgage error" class="avatar"
                          *ngIf="dssanphamdanggiaohang[i] !== undefined">
                      </div>
                      <div class="col-sm-10">
                        <div class="row mt-2 status" *ngIf="KiemTraTrangThai(eachPhieuDat)">
                          {{eachPhieuDat.Trang_thai}}
                        </div>
                        <div class="row mt-3">

                          <h6 class="m-0" *ngIf="dssanphamdanggiaohang[i] !== undefined">
                            {{dssanphamdanggiaohang[i][j]?.Ten_san_pham}}</h6>

                        </div>
                        <div class="row mt-2">
                          <small>x{{eachSP.So_luong}}</small>
                        </div>
                      </div>
                    </div>

                  </button>
                  <div class="container mb-3">
                    <div class="row">
                      <div class="col-sm-9 d-flex justify-content-end">
                        <button name="button" type="button" class="buttondanhgia">Chi tiết</button>
                      </div>
                      <div class="col-sm-3">
                        <div class="row d-flex justify-content-end">
                          <small> Mã đơn hàng <strong>{{eachPhieuDat._id}}</strong> </small>
                        </div>
                        <div class="row d-flex justify-content-end">
                          <small>{{eachPhieuDat.Ngay_cap_nhat | date:"MM/dd/yyyy h:mma"}}</small>
                        </div>
                      </div>
                    </div>

                  </div>
                </div>
              </div>
            </div>
          </nb-tab>

          <nb-tab badgeText={{soluongdanhgia}} badgeStatus="danger" tabTitle="Đánh giá" tabIcon="star-outline"
            responsive>
            <div class="container d-flex justify-content-center" *ngIf="dsdanhgia.length <= 0">
              <img src="https://fansport.vn/default/template/img/cart-empty.png" id="cardempty">
            </div>
            <div class="container pt-1 order_tracking">
              <div class="row pl-4 pr-4 divphieudat mt-4" *ngFor="let eachPhieuDat of dsdanhgia; let i = index">
                <div class="container eachphieudat">
                  <button id="phieudat" class="mt-3 mb-3" (click)="ChiTietDonHang(eachPhieuDat)"
                    *ngFor="let eachSP of eachPhieuDat.San_Pham; let j = index">
                    <div class="row">
                      <div class="col-sm-2 pl-0">
                        <img src={{dssanphamdanhgia[i][j]?.Hinh_anh}} alt="Imgage error" class="avatar"
                          *ngIf="dssanphamdanhgia[i] !== undefined">
                      </div>
                      <div class="col-sm-10">
                        <div class="row mt-2 status">
                          Giao hàng thành công
                        </div>
                        <div class="row mt-3">

                          <h6 class="m-0" *ngIf="dssanphamdanhgia[i] !== undefined">
                            {{dssanphamdanhgia[i][j]?.Ten_san_pham}}
                          </h6>
                        </div>
                        <div class="row mt-2">
                          <small>x{{eachSP.So_luong}}</small>
                        </div>

                      </div>

                    </div>

                  </button>
                  <div class="container mb-3">
                    <div class="row tongtien">
                      <div class="col-sm-8"></div>
                      <div class="col-sm-1 p-0 ">
                        <p class="m-0 mt-1">Tổng tiền: </p>
                      </div>
                      <div class="col-sm-3 p-0">
                        <h5 class="m-0 sum">{{eachPhieuDat.Tong_tien | currency: "VND"}}</h5>
                      </div>
                    </div>
                    <div class="row tongtien">
                      <div class="col-sm-7"></div>
                      <div class="col-sm-2 p-0 d-flex justify-content-end">
                        <button name="button" type="button" class="buttondanhgia"
                          (click)="open(content, eachPhieuDat, i, 0)" *ngIf="arrdanhgia[i] === 0">Đánh
                          giá</button>
                        <button name="button" type="button" class="buttondanhgia"
                          (click)="open(content, eachPhieuDat, i, 1)" *ngIf="arrdanhgia[i] !== 0">Cập nhật
                          đánh giá</button>
                      </div>
                      <div class="col-sm-3">
                        <div class="row d-flex justify-content-end">
                          <small> Mã đơn hàng <strong>{{eachPhieuDat._id}}</strong> </small>
                        </div>
                        <div class="row d-flex justify-content-end">
                          <small>{{eachPhieuDat.Ngay_cap_nhat | date:"MM/dd/yyyy h:mma"}}</small>
                        </div>
                      </div>
                    </div>
                  </div>

                </div>
              </div>
            </div>
          </nb-tab>
        </nb-tabset>

      </nb-card-body>
    </nb-card>

    <!-- Modal bình luận-->
    <div class="container" id="modals">
      <ng-template #content let-modal>
        <div class="modal-header">
          <div class="col-sm-12 ">
            <div class="row">
              <h5 class="modal-title" id="modal-basic-title">Bình Luận</h5>
            </div>
            <div class="row tichdiem d-flex justify-content-center align-items-center">
              <i class="fas fa-coins fa-2x m-2"></i>
              <p class="m-0">Đánh giá để được tích điểm, tiết kiệm cho những lần mua hàng sau nhé!</p>
            </div>
          </div>

        </div>
        <div class="modal-body parent">

          <div class="container hight">
            <div class="col-sm-12 ml-2" *ngFor="let eachSP of sanphamdanhgia.San_Pham; let j = index;">
              <div class="row">
                <button id="phieudat" class="mt-3 mb-3">
                  <div class="row">
                    <div class="col-sm-2 pl-0">
                      <img src={{dssanphamdanhgia[current][j]?.Hinh_anh}} alt="Imgage error" class="avatarcomment"
                        *ngIf="dssanphamdanhgia[current] !== undefined">
                    </div>
                    <div class="col-sm-10">
                      <div class="row mt-2 status">
                        Giao hàng thành công
                      </div>
                      <div class="row mt-3">

                        <h6 class="m-0" *ngIf="dssanphamdanhgia[current] !== undefined">
                          {{dssanphamdanhgia[current][j]?.Ten_san_pham}}
                        </h6>
                      </div>
                      <div class="row mt-2">
                        <small>x{{eachSP.So_luong}}</small>
                      </div>

                    </div>

                  </div>

                </button>
              </div>
              <div class="row d-flex justify-content-center">
                <div class="stars">
                  <form action="">
                    <input class="star star-5" id="star-{{j}}-a" type="radio" name="star" (click)="DemSoSao(j, 5)" />
                    <label class="star star-5" for="star-{{j}}-a"></label>
                    <input class="star star-4" id="star-{{j}}-b" type="radio" name="star" (click)="DemSoSao(j, 4)" />
                    <label class="star star-4" for="star-{{j}}-b"></label>
                    <input class="star star-3" id="star-{{j}}-c" type="radio" name="star" (click)="DemSoSao(j, 3)" />
                    <label class="star star-3" for="star-{{j}}-c"></label>
                    <input class="star star-2" id="star-{{j}}-d" type="radio" name="star" (click)="DemSoSao(j, 2)" />
                    <label class="star star-2" for="star-{{j}}-d"></label>
                    <input class="star star-1" id="star-{{j}}-e" type="radio" name="star" (click)="DemSoSao(j, 1)" />
                    <label class="star star-1" for="star-{{j}}-e"></label>
                  </form>
                </div>
              </div>
              <div class="row">
                <textarea class="textcomment" id="txtarea-{{j}}"
                  placeholder="Hãy chia sẻ những điều bạn thích về sản phẩm này nhé"></textarea>
              </div>
              <div class="row">
                <div class="col-sm-2 mt-3 mb-3" *ngFor="let hinhanh of imagePath; let h = index"
                  id="avatarcomment">
                  <img id="imagecomment-{{h}}" [src]="hinhanh" class="imagecomment">
                </div>
              </div>
              <div class="row mt-2">
                <input type="file" class="form-control-file" type="file" id="imgcomment-{{j}}" name='files[]'
                  multiple="multiple" (change)="UploadImg(j)">
              </div>
            </div>


          </div>
          <div class="modal-footer">
            <button type="button" class="btn comment" (click)="DanhGia()">Hoàn thành</button>
            <button type="button" class="btn btn-secondary" (click)="Huy()">Hủy</button>
          </div>
        </div>
      </ng-template>

    </div>

    <!-- Modal hủy đơn hàng-->
    <div class="container" id="modals">
      <ng-template #content_delete let-modal>
        <div class="modal-header">
          <div class="col-sm-12 ">
            <div class="row">
              <h5 class="modal-title" id="modal-delete-title">Xác nhận</h5>
            </div>
          </div>

        </div>
        <div class="modal-body parent">
          Bạn có muốn hủy đơn hàng?
        </div>
        <div class="modal-footer">
          <button type="button" class="btn comment" (click)="HuyDonChoXacNhan()">Xác nhận</button>
          <button type="button" class="btn btn-secondary" (click)="modal.close('Close')">Đóng</button>
        </div>
      </ng-template>

    </div>
